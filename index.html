<!DOCTYPE html>
<html>
<head>
  <title>Drawing</title>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="style.css">
  <link rel="icon" type="icon/png" href="icon.png">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
</head>
<body>

  <div id="id01" class="w3-modal">
    <div class="w3-modal-content w3-animate-top">
      <div class="w3-container ">
        <span onclick="document.getElementById('id01').style.display='none'" class="w3-button w3-center w3-display-topright">&times;</span>
        <h1>Desenhe!</h1>
        <p>Desenhe o que você quiser, use o botão "Apagar" para apagar seu desenho. Use o botão "Download" para salvar a sua linda criação.</p>
      </div>
    </div>
  </div>

   <div id="id02" class="w3-modal">
    <div class="w3-modal-content w3-animate-top">
      <div class="w3-container ">
        <h1>Desculpe!</h1>
        <p>Nosso site ainda não funciona em smartphones, a data para você conseguir acessar esta funcionalidade é <script type="text/javascript"> 
        var d = new Date(); 
        document.write(d.getDate() + "/" + d.getMonth() + "/" + d.getFullYear())
      </script></p>
      </div>
    </div>
  </div>



<canvas id="canvas"></canvas>
<a id="a"></a>
<div class="menu">
  <div class="inline">Cores:</div>
  <div class="color" id="blue" onclick="cor(this)"></div>
  <div class="color" id="red" onclick="cor(this)"></div>
  <div class="color" id="yellow" onclick="cor(this)"></div>
  <div class="color" id="green" onclick="cor(this)"></div>
  <div class="color" id="orange" onclick="cor(this)"></div>
  <div class="color" id="black" onclick="cor(this)"></div>
  <div class="color" id="eraser" onclick="cor(this)">
    <img src="https://clipartmag.com/image/eraser-drawing-19.jpg">
  </div>
  <div class="buton" id="apagar" onclick="erase()">Apagar</div>
  <div class="buton" id="apagar" onclick="download()">Download</div>
</div>
<script type="text/javascript">
  if( navigator.userAgent.match(/Android/i)
 || navigator.userAgent.match(/webOS/i)
 || navigator.userAgent.match(/iPhone/i)
 || navigator.userAgent.match(/iPad/i)
 || navigator.userAgent.match(/iPod/i)
 || navigator.userAgent.match(/BlackBerry/i)
 || navigator.userAgent.match(/Windows Phone/i)){
    document.getElementById('id02').style.display='block'
  }else{
    document.getElementById('id01').style.display='block';
  }


  

// create canvas element and append it to document body
var canvas = document.getElementById("canvas");
var a = document.getElementById('a');

var color = "#000"
var grossura = 5;

function cor(obj) {

    switch(obj.id){
    case "blue":
      color = "#0800ff";
    break;
    case "red":
      color = "#ff0000";
    break;
    case "yellow":
      color = "#ffff00";
    break;
    case "green":
      color = "#00ff00";
    break;
    case "white":
      color = "#ffffff";
    break;
    case "orange":
      color = "#ff9d00";
    break;
    case "black":
      color = "#000000";
    break;
    case "eraser":
      color = "#ffffff";
      
    break;
    }
    if (obj.id === "eraser") {
      grossura = 20;
    }else{
      grossura = 5;
    }

}

 function white() {
   ctx.fillStyle = "white";
   ctx.fillRect(0, 0, 10000, 10000);
 }


// some hotfixes... ( ≖_≖)
document.body.style.margin = 0;
canvas.style.position = 'fixed';

// get canvas 2D context and set him correct size
var ctx = canvas.getContext('2d');
resize();
 white();

function erase() {
        var m = confirm("Tem certeza?");
        if (m) {
           ctx.clearRect(0, 0, 10000, 10000);
           white();
        }

    }

function download(){

  var dataURL = canvas.toDataURL();
  var confirma = confirm('Fazer download?');

  var msg = prompt("Digite um nome para o arquivo:", "download");

  if (confirma) {
    a.href = dataURL;
    a.download = msg;
    a.click();
  }
}

// last known position
var pos = { x: 0, y: 0 };

window.addEventListener('resize', resize);
document.addEventListener('mousemove', draw);
document.addEventListener('mousedown', setPosition);
document.addEventListener('mouseenter', setPosition);

// new position from mouse event
function setPosition(e) {
  pos.x = e.clientX;
  pos.y = e.clientY;
}

// resize canvas
function resize() {
  ctx.canvas.width = window.innerWidth;
  ctx.canvas.height = window.innerHeight;
}

 

function draw(e) {
  // mouse left button must be pressed
  if (e.buttons !== 1) return;

  ctx.beginPath(); // begin

  ctx.lineWidth = grossura;
  ctx.lineCap = 'round';
  ctx.strokeStyle = color;

  ctx.moveTo(pos.x, pos.y); // from
  setPosition(e);
  ctx.lineTo(pos.x, pos.y); // to

  ctx.stroke(); // draw it!
}
</script>

</body>
</html>
